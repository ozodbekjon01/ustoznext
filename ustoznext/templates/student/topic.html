<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ topic.title }}</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    background: #45617c;
}

.sidebar {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    position: sticky;
    top: 20px;
}

.topic-link {
    display: block;
    padding: 10px 12px;
    border-radius: 8px;
    text-decoration: none;
    color: #333;
    margin-bottom: 5px;
}
.topic-link:hover {
    background: #e7f0ff;
}
.topic-link.active {
    background: #0d6efd;
    color: white;
    font-weight: bold;
}

.content-box {
    background: #fff;
    padding: 25px;
    border-radius: 12px;
    
}

.video-box iframe {
    width: 100%;
    height: 380px;
    border-radius: 12px;
}
</style>
</head>

<body class="container py-4">

<div class="mb-3">
    <a href="/student/courses" class="btn btn-secondary">⬅ Ortga</a>
</div>

<div class="row g-4">

    <!-- SIDEBAR -->
    <div class="col-md-3">
        <div class="sidebar">
            <h6>{{ course.title }}</h6>
            <hr>

            {% for t in topics %}
                <a
                    href="{{ url_for('student.topic', course_id=course.id, topic_id=t.id) }}"
                    class="topic-link {% if t.id == active_topic_id %}active{% endif %}"
                >
                    {{ t.position }}. {{ t.title }}
                </a>
            {% endfor %}
        </div>
    </div>

    <!-- CONTENT -->
    <div class="col-md-9">

        {% if topic.video_url %}
        <div class="video-box mb-3">
            <iframe src="{{ topic.video_url }}" allowfullscreen></iframe>
        </div>
        {% endif %}

        <div class="content-box">
            <h4>{{ topic.title }}</h4>
            <hr>

            {{ topic.content | replace('\n','<br>') | safe }}

            {% if next_topic %}
                <div class="text-end mt-4">
                    <a
                        href="{{ url_for('student.topic',
                                        course_id=course.id,
                                        topic_id=next_topic.id) }}"
                        class="btn btn-primary px-4"
                    >Keyingi dars →</a>
                </div>
            {% endif %}
        </div>



    </div>

</div>

</body>
</html>
